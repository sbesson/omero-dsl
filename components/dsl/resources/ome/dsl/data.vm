begin;
set constraints all deferred;

insert into experimenter (id,version,omename,firstname,lastname)
        values (0,0,'root','root','root');
insert into event (id,version,time) values (0,0,now());
insert into experimentergroup (id,version,owner_id,group_id,creation_id,name)
        values (0,0,0,0,0,'system');
insert into experimentergroup (id,version,owner_id,group_id,creation_id,name)
        values (nextval('seq_experimentergroup'),0,0,0,0,'user');
insert into eventtype (id,owner_id,group_id,creation_id,value) values
        (0,0,0,0,'Bootstrap');
insert into groupexperimentermap 
        (id,version,owner_id,group_id,creation_id, defaultgrouplink, parent, child) 
		values
		(0,0,0,0,0,true,0,0);
insert into groupexperimentermap 
        (id,version,owner_id,group_id,creation_id, defaultgrouplink, parent, child) 
		select nextval('seq_groupexperimentermap'),0,0,0,0,false,1,0;

		
update event set type = 0;

alter table event alter column type set not null;
	
##insert into event (id,version,name,e) select next, 0 as version, 'Bootstrap'
##  as name, next from (select nextval('seq_event') as next) as nv;

## ENUMS
#foreach($enum in $types)
#foreach($prop in $enum.properties)
#set($table = ${enum.typeToColumn($enum.id)} )
#if($prop.class.name == "ome.dsl.EntryField")
insert into $table (id,owner_id,group_id,creation_id,value)
	select nextval('seq_$table'),0,0,0,'$prop.name';
#end
#end
#end

commit;
